"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2255],{2255:(Y,_,a)=>{a.r(_),a.d(_,{ViewPageModule:()=>b});var u=a(9808),r=a(4182),n=a(9537),c=a(7201),g=a(655),m=a(6027),t=a(2096),f=a(2963);function p(o,i){1&o&&(t.TgZ(0,"small"),t._uU(1,"Preencha este campo."),t.qZA())}function h(o,i){1&o&&(t.TgZ(0,"small"),t._uU(1,"Pelo menos 3 caracteres."),t.qZA())}function x(o,i){if(1&o&&(t.TgZ(0,"ion-text",21),t.YNc(1,p,2,0,"small",20),t.YNc(2,h,2,0,"small",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.commentForm.controls.name.errors?null:e.commentForm.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.commentForm.controls.name.errors?null:e.commentForm.controls.name.errors.minlength)}}function Z(o,i){1&o&&(t.TgZ(0,"small"),t._uU(1,"Preencha este campo."),t.qZA())}function v(o,i){1&o&&(t.TgZ(0,"small"),t._uU(1,"Deve ser um e-mail."),t.qZA())}function T(o,i){if(1&o&&(t.TgZ(0,"ion-text",21),t.YNc(1,Z,2,0,"small",20),t.YNc(2,v,2,0,"small",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.commentForm.controls.email.errors?null:e.commentForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.commentForm.controls.email.errors?null:e.commentForm.controls.email.errors.email)}}function A(o,i){1&o&&(t.TgZ(0,"small"),t._uU(1,"Preencha este campo."),t.qZA())}function F(o,i){1&o&&(t.TgZ(0,"small"),t._uU(1,"Pelo menos 5 caracteres."),t.qZA())}function P(o,i){if(1&o&&(t.TgZ(0,"ion-text",21),t.YNc(1,A,2,0,"small",20),t.YNc(2,F,2,0,"small",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.commentForm.controls.comment.errors?null:e.commentForm.controls.comment.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.commentForm.controls.comment.errors?null:e.commentForm.controls.comment.errors.minlength)}}function w(o,i){if(1&o&&(t.TgZ(0,"ion-card",23)(1,"ion-card-header")(2,"ion-card-subtitle"),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"ion-card-content"),t._uU(6),t.qZA()()),2&o){const e=i.$implicit;t.xp6(3),t.AsE("Por ",e.name," em ",t.xi3(4,3,e.date,"d/m/Y"),"."),t.xp6(3),t.Oqu(e.comment)}}function q(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,w,7,6,"ion-card",22),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.comments)}}function U(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"ion-content",3)(1,"div",4),t._UZ(2,"ion-img",5),t.qZA(),t.TgZ(3,"h2",4),t._uU(4),t.qZA(),t.TgZ(5,"small",6),t._uU(6),t.ALo(7,"date"),t.ALo(8,"date"),t.qZA(),t._UZ(9,"div",7),t.TgZ(10,"ion-button",8),t._UZ(11,"ion-icon",9),t._uU(12," Voltar "),t.qZA(),t._UZ(13,"ion-item-divider",10),t.TgZ(14,"h3"),t._uU(15,"Comente"),t.qZA(),t.TgZ(16,"form",11),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submitForm()}),t.TgZ(17,"ion-list",12)(18,"ion-item")(19,"ion-label",13),t._uU(20,"Nome:"),t.qZA(),t._UZ(21,"ion-input",14),t.YNc(22,x,3,2,"ion-text",15),t.qZA(),t.TgZ(23,"ion-item")(24,"ion-label",13),t._uU(25,"E-mail:"),t.qZA(),t._UZ(26,"ion-input",16),t.YNc(27,T,3,2,"ion-text",15),t.qZA(),t.TgZ(28,"ion-item")(29,"ion-label",13),t._uU(30,"Coment\xe1rio:"),t.qZA(),t._UZ(31,"ion-textarea",17),t.YNc(32,P,3,2,"ion-text",15),t.qZA(),t.TgZ(33,"ion-item")(34,"ion-button",18),t._uU(35,"Enviar"),t.qZA()()()(),t._UZ(36,"ion-item-divider",19),t.TgZ(37,"h3"),t._uU(38,"Coment\xe1rios"),t.qZA(),t.YNc(39,q,2,1,"div",20),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.s9C("src",e.art.image),t.xp6(2),t.Oqu(e.art.title),t.xp6(2),t.AsE("",t.xi3(7,11,e.art.date,"d/m/Y")," \xe0s ",t.xi3(8,14,e.art.date,"H:mm"),"."),t.xp6(3),t.Q6J("innerHTML",e.art.body,t.oJD),t.xp6(7),t.Q6J("formGroup",e.commentForm),t.xp6(6),t.Q6J("ngIf",e.commentForm.controls.name.dirty&&e.commentForm.controls.name.errors),t.xp6(5),t.Q6J("ngIf",e.commentForm.controls.email.dirty&&e.commentForm.controls.name.errors),t.xp6(5),t.Q6J("ngIf",e.commentForm.controls.comment.dirty&&e.commentForm.controls.name.errors),t.xp6(2),t.Q6J("disabled",e.commentForm.invalid),t.xp6(5),t.Q6J("ngIf",e.comments)}}const J=[{path:"",component:(()=>{class o{constructor(e,s,l,d,I,y){this.afs=e,this.activatedRoute=s,this.route=l,this.alertController=d,this.fb=I,this.date=y,this.comments=[]}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.createForm(),this.id=this.activatedRoute.snapshot.paramMap.get("id");const e=yield(0,m.QT)((0,m.JU)(this.afs,"manual",this.id));e.exists()?(this.art=e.data(),(0,m.r7)((0,m.JU)(this.afs,"manual",this.id),{views:(parseInt(this.art.views,10)+1).toString()}),(0,m.cf)((0,m.IO)((0,m.hJ)(this.afs,"comment"),(0,m.ar)("article","==",this.id),(0,m.ar)("status","==","on"),(0,m.Xo)("date","desc")),s=>{this.comments=[],s.forEach(l=>{const d=l.data();this.comments.push(d)})})):this.route.navigate(["/usuarios"])})}presentAlert(e,s){return(0,g.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:e,message:s,buttons:[{text:"OK",handler:()=>(this.commentForm.markAsPristine(),this.commentForm.reset({name:this.commentForm.value.name,email:this.commentForm.value.email}),!0)}]})).present()})}createForm(){this.commentForm=this.fb.group({name:["",[r.kI.required,r.kI.minLength(3)]],email:["",[r.kI.required,r.kI.email]],comment:["",[r.kI.required,r.kI.minLength(5)]]})}submitForm(){return(0,g.mG)(this,void 0,void 0,function*(){this.commentForm.invalid?this.presentAlert("Ooooops!","Preencha todos os campos antes de enviar seus coment\xe1rios..."):(this.commentData=this.commentForm.value,this.commentData.date=this.date.brNow(),this.commentData.status="on",this.commentData.article=this.id,yield(0,m.ET)((0,m.hJ)(this.afs,"comment"),this.commentData).then(()=>{const e=this.commentForm.value.name.split(" ")[0];this.presentAlert(`Ol\xe1 ${e}!`,"Seu coment\xe1rio foi enviado com sucesso.<br><br>Obrigado...")}).catch(()=>{this.presentAlert("Ooooops!","Ocorreu um erro ao enviar seu coment\xe1rio.<br><br>Por favor, tente mais tarde...")}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gg),t.Y36(c.gz),t.Y36(c.F0),t.Y36(n.Br),t.Y36(r.qu),t.Y36(f.R))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],decls:7,vars:1,consts:[["slot","start"],["defaultHref","/usuarios"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"ion-text-center"],[3,"src"],[1,"date-time"],[3,"innerHTML"],["routerLink","/usuarios",1,"ion-margin-top"],["name","arrow-back","slot","start"],[1,"ion-margin-bottom"],["novalidate","",3,"formGroup","ngSubmit"],["lines","full",1,"ion-no-margin"],["position","floating"],["type","text","formControlName","name","required",""],["color","danger",4,"ngIf"],["type","email","formControlName","email","required",""],["formControlName","comment","required","","autoGrow",""],["type","submit","size","default","color","primary",3,"disabled"],[1,"ion-no-padding"],[4,"ngIf"],["color","danger"],["class","ion-no-margin ion-margin-top",4,"ngFor","ngForOf"],[1,"ion-no-margin","ion-margin-top"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Artigo completo"),t.qZA()()(),t.YNc(6,U,40,17,"ion-content",2)),2&e&&(t.xp6(6),t.Q6J("ngIf",s.art))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,u.O5,n.W2,n.Xz,n.YG,n.YI,c.rH,n.gu,n.rH,r._Y,r.JL,r.sg,n.q_,n.Ie,n.Q$,n.pK,n.j9,r.JJ,r.u,r.Q7,n.yW,n.g2,u.sg,n.PM,n.Zi,n.tO,n.FN],pipes:[u.uU],styles:[".date-time[_ngcontent-%COMP%]{display:block;text-align:right}ion-img[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]}),o})()}];let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(J)],c.Bz]}),o})(),b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,r.u5,n.Pc,V,r.UX]]}),o})()}}]);